CREATE TABLE TIER
(
  TierID INT NOT NULL,
  TierName INT NOT NULL,
  TierLevel INT NOT NULL,
  PRIMARY KEY (TierID)
);

CREATE TABLE SALES_TRANSACTION
(
  TimeOfTranscation INT NOT NULL,
  CryptoUsed INT NOT NULL,
  Amount INT NOT NULL,
  TransactionID INT NOT NULL,
  Username INT NOT NULL,
  TierID INT NOT NULL,
  PRIMARY KEY (TransactionID),
  FOREIGN KEY (Username) REFERENCES USER(Username),
  FOREIGN KEY (TierID) REFERENCES TIER(TierID)
);

CREATE TABLE USER
(
  Password INT NOT NULL,
  Email INT,
  Username INT NOT NULL,
  TierID INT NOT NULL,
  Refers_Username INT,
  PRIMARY KEY (Username),
  FOREIGN KEY (TierID) REFERENCES TIER(TierID),
  FOREIGN KEY (Refers_Username) REFERENCES USER(Username)
);

CREATE TABLE MACHINE
(
  MachineID INT NOT NULL,
  IPAddress INT NOT NULL,
  LastCheckIn INT NOT NULL,
  OperatingSystem INT NOT NULL,
  Version INT NOT NULL,
  Cores INT NOT NULL,
  Ram INT NOT NULL,
  TierID INT NOT NULL,
  Username INT NOT NULL,
  PRIMARY KEY (MachineID),
  FOREIGN KEY (TierID) REFERENCES TIER(TierID),
  FOREIGN KEY (Username) REFERENCES USER(Username)
);

CREATE TABLE Tasks
(
  TaskID INT NOT NULL,
  TaskType INT NOT NULL,
  Username INT NOT NULL,
  PRIMARY KEY (TaskID),
  FOREIGN KEY (Username) REFERENCES USER(Username)
);

CREATE TABLE Executes
(
  TaskID INT NOT NULL,
  MachineID INT NOT NULL,
  PRIMARY KEY (TaskID, MachineID),
  FOREIGN KEY (TaskID) REFERENCES Tasks(TaskID),
  FOREIGN KEY (MachineID) REFERENCES MACHINE(MachineID)
);
